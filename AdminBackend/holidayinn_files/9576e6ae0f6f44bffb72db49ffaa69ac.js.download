Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.trackerFramework.postPopulate.add(function(){try{if(typeof isRegionAMER==="function")if(isRegionAMER())Bootstrapper.imageRequest("https://secure.leadback.advertising.com/adcedge/lb?site\x3d695501\x26betr\x3dsslbet_1482260874\x3d[+]ssprlb_1482260874[24]|sslbet_1482260891\x3d[+]ssprlb_1482260891[168]|sslbet_1482260903\x3d[+]ssprlb_1482260903[336]|sslbet_1482260911\x3d[+]ssprlb_1482260911[8760]")}catch(e){Bootstrapper.reportException({message:"Tracking: AOL Pixel for Data Leakage"+
e});console.log("Tracking: AOL Pixel for Data Leakage"+e)}})},1762217,[1728505],452842,[415326]);
Bootstrapper.bindDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;setTimeout(function(){var jQueryspHotelsArray=jQuery("span.hotel-name a[href*\x3dspnd]").parent();jQueryspHotelsArray.each(function(){var matchText="Independent (SPHC)";var hotelName=jQuery(this).text();jQuery(this).text(hotelName.replace(matchText,""));jQuery(this).siblings(".hotel-brand").remove();jQuery(this).siblings(".rating-review").remove()});console.log("Fix - Remove Star Rating applied.")},
2E3)},1776879,455363);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var RoomKeyConfig={enabled:true,trafficPercentage:"100",envKeys:{qap:"26f0dd8e8b398a133988a806575f6420","int":"26f0dd8e8b398a133988a806575f6420",qa:"26f0dd8e8b398a133988a806575f6420",staging:"26f0dd8e8b398a133988a806575f6420",perftest:"26f0dd8e8b398a133988a806575f6420",prod:"ae020d407073c7e711f5649ef9844ec4"},disabledForRCMembers:false,supportedLocales:["en_US","en_GB"],
restrictedAkamaiCountryCodes:["CN"],restrictedRates:["IVTCD","IVANI"],restrictedPMIDList:["99613032","99624372","99634964","99634975","99634986","99634990","99618993","99583831","99584026","99634975","99634986","99634964","99634990","99613010","99507785","99613006","99602241","99507741","99507763","99507940","99502233","99507730","99502690","99502362","99504182","99502255","99502351","99608110","99602016","99613021","99507774","99602020","99602230","99584030","99584041"],pageAction:{"hotel-information":{triggerSelectors:".htl-search"},
"hotelsearch":{triggerSelectors:"#btnChangeSearch, #btnApplyFilter, .checkRates"},"roomrate":{triggerSelectors:".bookThisRoomBaseRate"},"home":{triggerSelectors:".htl-search",searchSelectors:{checkin:".check-in",checkout:".check-out",destination:".searchbox",rooms:".rooms-input",adults:".adults-input",children:".children-input"}}}};jQuery(function($){if(!String.prototype.startsWith)String.prototype.startsWith=function(searchString,position){position=position||0;return this.indexOf(searchString,position)===
position};$(document).ready(function(){RoomKeyTag.init(RoomKeyConfig,trackingJson);var buttonSelector=RoomKeyConfig.pageAction[trackingJson.type].triggerSelectors;if(buttonSelector)$(buttonSelector).click(function(e){RoomKeyTag.loadPopunder(false)})})})},1765246,[1765245],423133,[423129]);
Bootstrapper.bindDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.trackerFramework.postPopulate.add(function(){try{if(typeof isRegionGC!="function"||!isRegionGC())if(typeof trackingJson.type!="undefined")if(trackingJson.type==="reservationconfirmation")Bootstrapper.imageRequest("https://traffic.outbrain.com/network/trackpxl?advid\x3d56898\x26action\x3dview");else Bootstrapper.imageRequest("https://amplifypixel.outbrain.com/pixel?mid\x3d00ba8b802396cde19d241972fb47e7b67e")}catch(e){Bootstrapper.reportException({message:"Tracking: Outbrain - Native Campaigns"+
e});console.log("Tracking: Outbrain - Native Campaigns"+e)}})},1667018,412631);
Bootstrapper.bindDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;if(typeof jQuery==="function"){var Util=Util||{};Util.Kimpton=function(jQuery){var _private={intersitialUri:"customer-care/interstitial",styleBackgroundModal:{"display":"none","position":"fixed","z-index":"1000","left":"0","top":"0","width":"100%","height":"100%","overflow":"auto","background-color":"rgb(0,0,0)","background-color":"rgba(0,0,0,0.60)","overflow":"none"},styleContentModal:{"background-color":"#fefefe",
"margin":"15% auto","border":"0","width":"560px","padding":"0"},styleCloseModal:{"cursor":"pointer","position":"absolute","width":"18px","height":"18px","margin":"10px 0 0 532px","background":"transparent url(https://ihg.scene7.com/is/image/ihg/button-close-36x36?fmt\x3dpng-alpha\x26wid\x3d18\x26hei\x3d18) no-repeat"},createContainers:function(){_private.modalDiv=jQuery("\x3cdiv /\x3e").appendTo("body");_private.modalContent=jQuery("\x3cdiv/\x3e").appendTo(_private.modalDiv);jQuery(_private.modalDiv).css(_private.styleBackgroundModal);
jQuery(_private.modalContent).css(_private.styleContentModal);jQuery(_private.modalDiv).click(function(){jQuery(_private.modalDiv).hide()})},iFrameUrl:function(linkUrl){var splitUrl=linkUrl.replace("/interstitial","/interstitial/modal");return splitUrl},showModal:function(linkUrl){var modalUrl=_private.iFrameUrl(linkUrl);_private.modalContent.empty();_private.closeModal=jQuery("\x3cspan /\x3e").appendTo(_private.modalContent);jQuery(_private.closeModal).css(_private.styleCloseModal);_private.iFrame=
jQuery("\x3ciframe /\x3e",{width:"560px",scrolling:"no",frameborder:"0"}).appendTo(_private.modalContent);jQuery(_private.closeModal).click(function(){jQuery(_private.modalDiv).hide()});jQuery(_private.iFrame)[0].onload=function(event){jQuery(_private.iFrame).contents().find(".hideModal").click(function(e){jQuery(_private.modalDiv).hide();return true});jQuery(_private.modalDiv).show();var height=jQuery(_private.iFrame).contents().find("#kimpton__modal__wrapper").outerHeight();jQuery(_private.iFrame).attr("height",
height+12+"px");if(trackingJson.siteLanguage.toLowerCase()=="ar")jQuery(_private.closeModal).css({"margin":"10px 532px 0 10px"})};jQuery(_private.iFrame).attr("src",modalUrl)},captureClick:function(target){_private.createContainers();jQuery(target).each(function(index,value){var interstitialUrl=jQuery(value).attr("href");jQuery(value).click(function(e){if(!jQuery(value).hasClass("brandBar-link-ki")){e.preventDefault();_private.showModal(interstitialUrl)}})})}};var _public={onDocumentReady:jQuery(function(){if(typeof trackingJson!==
"undefined")_private.captureClick("a[href*\x3d'"+_private.intersitialUri+"']")})};return _public}(jQuery)}},1745289,393074);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.trackerFramework.postPopulate.add(function(){try{var aParam="";if(trackingJson.isGC||location.pathname.indexOf("/cn/zh/")!=-1)aParam="a\x3d%5B30640%2C34143%2C34144%2C34932%5D";else aParam="a\x3d%5B30640%2C34143%2C34144%5D";var pixelURL="https://widget.criteo.com/event?"+aParam+"\x26v\x3d4.0.0\x26p0\x3de";var checkInDate="",checkOutDate="",hotelCode=
"",transactionID="",imageParameters="",bookingTotal="";if(typeof trackingJson.checkInDate!="undefined"&&trackingJson.checkInDate!="")checkInDate=covertDateFormat_to_YYYY_MM_DD(returnValidValue(trackingJson.checkInDate));else if(typeof trackingJson.arrivalDate!="undefined")checkInDate=covertDateFormat_to_YYYY_MM_DD(returnValidValue(trackingJson.arrivalDate));if(typeof trackingJson.checkOutDate!="undefined"&&trackingJson.checkOutDate!="")checkOutDate=covertDateFormat_to_YYYY_MM_DD(returnValidValue(trackingJson.checkOutDate));
else if(typeof trackingJson.departureDate!="undefined")checkOutDate=covertDateFormat_to_YYYY_MM_DD(returnValidValue(trackingJson.departureDate));if(typeof trackingJson.propertyCode!="undefined")hotelCode=trackingJson.propertyCode;else if(typeof trackingJson.hotelCode!="undefined")hotelCode=trackingJson.hotelCode;if(typeof trackingJson.initiatedUnitPrice!="undefined")bookingTotal=returnValidValue(trackingJson.initiatedUnitPrice);if(trackingJson.type==="reservationconfirmation"){if(typeof trackingJson.confirmationNumber!=
"undefined")if(trackingJson.confirmationNumber!=null&&trackingJson.confirmationNumber!="null")transactionID=trackingJson.confirmationNumber;if(typeof trackingJson.roomRevenueUSD!="undefined")bookingTotal=returnValidValue(trackingJson.roomRevenueUSD)}if(trackingJson.type==="home")imageParameters="%3Dvh\x26p1\x3de%3Ddis\x26p2\x3de%3Dvs%26din%3D"+checkInDate+"%26dout%3D"+checkOutDate+"\x26adce\x3d1\x26rt\x3dgif";else if(trackingJson.type==="guestandpaymentinfo")imageParameters="%3Ddis\x26p1\x3de%3Dvb%26p%3D%255Bi%25253D"+
hotelCode+"%252526pr%25253D"+bookingTotal+"%252526q%25253D1%255D\x26p2\x3de%3Dvp%26p%3D"+hotelCode+"%26din%3D"+checkInDate+"%26dout%3D"+checkOutDate+"\x26adce\x3d1\x26rt\x3dgif";else if(trackingJson.type==="hotelsearch")imageParameters="%3Ddis\x26p1\x3de%3Dvs%26din%3D"+checkInDate+"%26dout%3D"+checkOutDate+"\x26adce\x3d1\x26rt\x3dgif";else if(trackingJson.type==="reservationconfirmation")imageParameters="%3Ddis\x26p1\x3de%3Dvc%26id%3D"+transactionID+"%26p%3D%255Bi%25253D"+hotelCode+"%252526pr%25253D"+
bookingTotal+"%252526q%25253D1%255D\x26p2\x3de%3Dvs%26din%3D"+checkInDate+"%26dout%3D"+checkOutDate+"\x26adce\x3d1\x26rt\x3dgif";else if(trackingJson.type==="hotel-information")imageParameters="%3Dvp%26p%3D"+hotelCode+"\x26p1\x3de%3Ddis\x26p2\x3de%3Dvs%26din%3D"+checkInDate+"%26dout%3D"+checkOutDate+"\x26adce\x3d1\x26rt\x3dgif";else if(trackingJson.type==="roomrate")imageParameters="%3Dvp%26p%3D"+hotelCode+"%26din%3D"+checkInDate+"%26dout%3D"+checkOutDate+"\x26adce\x3d1\x26rt\x3dgif";Bootstrapper.imageRequest(pixelURL+
imageParameters)}catch(e){Bootstrapper.reportException({message:"Tracking: Criteo USA Media - Retargeting Global "+e});console.log("Tracking: Criteo USA Media - Retargeting Global"+e)}function covertDateFormat_to_YYYY_MM_DD(inputDate){if(typeof inputDate!="undefined"){var ary=inputDate.split("/");if(ary!=null&&ary.length==3)return ary[2]+"-"+ary[0]+"-"+ary[1]}return""}})},1796779,[1728505],445504,[415326]);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.trackerFramework.postPopulate.add(function(){try{var triggerPixel=false;if(typeof isRegionEurope==="function")if(isRegionEurope())triggerPixel=true;if(typeof isRegionAMEA==="function")if(isRegionAMEA())triggerPixel=true;if(triggerPixel)if(trackingJson.siteLanguage.toUpperCase()==="EN"||trackingJson.siteLanguage.toUpperCase()==="AR"){var pixelURL="https://pixel.sojern.com/pixel/img/";
var num="",pixelParams="",hd1="",hd2="",ha1="",hc1="",hs1="",hn1="",hcu="",hb="",hpr="",hr="",hpid="",hp="",hconfno="",hrp="",hdc="",hl="";if(typeof trackingJson.type!="undefined"){if(trackingJson.type==="home")num="30352";else if(trackingJson.type==="reservationconfirmation")num="30351";else if(trackingJson.type==="hotelsearch")num="30350";else num="30353";if(trackingJson.type==="reservationconfirmation"||trackingJson.type==="hotelsearch"){hd1=covertDateFormat(returnValidValue(trackingJson.checkInDate));
if(typeof trackingJson.checkInDate==="undefined"||hd1===null)hd1=covertDateFormat(returnValidValue(trackingJson.reservationStartDate));hd2=covertDateFormat(returnValidValue(trackingJson.checkOutDate));hc1=returnValidValue(trackingJson.destination);var str_array=hc1.split(",");for(var i=0;i<str_array.length;i++)if(i==str_array.length-1)hn1=str_array[i].replace(/^\s*/,"").replace(/\s*$/,"");else if(i>0)hs1=hs1+","+str_array[i].replace(/^\s*/,"").replace(/\s*$/,"");else hs1=str_array[i].replace(/^\s*/,
"").replace(/\s*$/,"");if(typeof trackingJson.hotelBrand4Digit!="undefined"||trackingJson.hotelBrand4Digit!=null)hb=returnValidValue(trackingJson.hotelBrand4Digit);else hb=returnValidValue(trackingJson.hotelBrand);hcu=returnValidValue(trackingJson.currencyCode);hpr=returnValidValue(trackingJson.propertyCode);hr=returnValidValue(trackingJson.roomNights);hpid=returnValidValue(trackingJson.propertyCode);hp=returnValidValue(trackingJson.roomRevenueUSD);hconfno=returnValidValue(trackingJson.confirmationNumber)}if(trackingJson.type===
"reservationconfirmation"){hpr=returnValidValue(trackingJson.city)+","+returnValidValue(trackingJson.state)+","+returnValidValue(trackingJson.countryBooked);pixelParams="\x26hd1\x3d"+hd1+"\x26hd2\x3d"+hd2+"\x26ha1\x3d"+ha1+"\x26hc1\x3d"+hc1+"\x26hs1\x3d"+hs1+"\x26hn1\x3d"+hn1+"\x26hb\x3d"+hb+"\x26hpr\x3d"+hpr+"\x26hr\x3d"+hr+"\x26hpid\x3d"+hpid+"\x26hp\x3d"+hp+"\x26hcu\x3d"+hcu+"\x26hconfno\x3d"+hconfno+"\x26hrp\x3d"+hrp+"\x26hdc\x3d"+hdc+"\x26hl\x3d"+hl}if(trackingJson.type==="hotelsearch"){hd1=
covertDateFormat(returnValidValue(trackingJson.arrivalDate));hd2=covertDateFormat(returnValidValue(trackingJson.departureDate));pixelParams="\x26hd1\x3d"+hd1+"\x26hd2\x3d"+hd2+"\x26ha1\x3d"+ha1+"\x26hc1\x3d"+hc1+"\x26hs1\x3d"+hs1+"\x26hn1\x3d"+hn1+"\x26hcu\x3d"+hcu+"\x26hb\x3d"+hb+"\x26hpr\x3d"+hpr+"\x26hr\x3d"+hr+"\x26hpid\x3d"+hpid+"\x26hp\x3d"+hp}if(null!==num&&num.length>0)if(trackingJson.type==="home")Bootstrapper.imageRequest(pixelURL+num+"?p_v\x3d1\x26f_v\x3dv3_image\x26vid\x3dhot");else if(trackingJson.type===
"reservationconfirmation")Bootstrapper.imageRequest(pixelURL+num+"?p_v\x3d2\x26f_v\x3dv3_image\x26vid\x3dhot"+pixelParams);else if(trackingJson.type==="hotelsearch")Bootstrapper.imageRequest(pixelURL+num+"?p_v\x3d1\x26f_v\x3dv3_image\x26vid\x3dhot"+pixelParams);else Bootstrapper.imageRequest(pixelURL+num+"?p_v\x3d1\x26f_v\x3dv3_image\x26vid\x3dhot")}}}catch(e){Bootstrapper.reportException({message:"Tracking: Your Rate Campaign - Sojern"+e});console.log("Tracking: Your Rate Campaign - Sojern"+e)}function covertDateFormat(inputDate){if(typeof inputDate!=
"undefined"){var ary=inputDate.split("/");if(ary!=null&&ary.length==3)return ary[2]+"-"+ary[0]+"-"+ary[1]}return null}})},1762221,[1728505],394131,[415326]);
Bootstrapper.bindDependencyDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.trackerFramework.postPopulate.add(function(){try{if(typeof isRegionEurope==="function")if(isRegionEurope()){var imageParameters="";var searchImageParameters="";var hotelDetailImageParameters="";if(trackingJson.type==="home"||trackingJson.type==="findandbook")imageParameters+="/7973;57460;6152/?spotName\x3dLandingPage";else if(trackingJson.type==="hotel-information")imageParameters+=
"/7973;57462;6152/?spotName\x3dHotelPage";else if(trackingJson.type==="reservationconfirmation")imageParameters+="/7973;57463;6152/?spotName\x3dBookingPage";else if(trackingJson.type==="hotelsearch")imageParameters+="/7973;57461;6152/?spotName\x3dSearchPage";if(trackingJson.type==="hotel-information"||trackingJson.type==="hotelsearch"){imageParameters+="\x26U1\x3d";imageParameters+=getBrandCode();searchImageParameters+="brand\x3d";searchImageParameters+=getBrandCode();hotelDetailImageParameters+=
"brand\x3d";hotelDetailImageParameters+=getBrandCode();if(trackingJson.type==="hotel-information"){imageParameters+="\x26U2\x3d";hotelDetailImageParameters+="\x26id\x3d";if(typeof trackingJson.propertyCode!="undefined")if(trackingJson.propertyCode!=null&&trackingJson.propertyCode!="null"){imageParameters+=trackingJson.propertyCode;hotelDetailImageParameters+=trackingJson.propertyCode}}searchImageParameters+="\x26lang\x3d";hotelDetailImageParameters+="\x26lang\x3d";if(typeof trackingJson.siteLanguage!=
"undefined"){searchImageParameters+=trackingJson.siteLanguage;hotelDetailImageParameters+=trackingJson.siteLanguage}searchImageParameters+="\x26date\x3d";hotelDetailImageParameters+="\x26date\x3d";imageParameters+="\x26U3\x3d";if(typeof trackingJson.checkInDate!="undefined"){imageParameters+=trackingJson.checkInDate;searchImageParameters+=trackingJson.checkInDate;hotelDetailImageParameters+=trackingJson.checkInDate}if(typeof trackingJson.reservation!="undefined"&&typeof trackingJson.reservation.checkInDate!=
"undefined"){imageParameters+=trackingJson.reservation.checkInDate;searchImageParameters+=trackingJson.reservation.checkInDate;hotelDetailImageParameters+=trackingJson.reservation.checkInDate}imageParameters+="\x26U4\x3d";imageParameters+="\x26U5\x3d";hotelDetailImageParameters+="\x26location\x3d";if(typeof trackingJson.hotelCityStateCountryCode!="undefined"){imageParameters+=trackingJson.hotelCityStateCountryCode;hotelDetailImageParameters+=trackingJson.hotelCityStateCountryCode}searchImageParameters+=
"\x26location\x3d";if(typeof trackingJson.destination!="undefined")searchImageParameters+=trackingJson.destination}if(trackingJson.type==="reservationconfirmation"){imageParameters+="\x26ftXRef\x3d";if(typeof trackingJson.confirmationNumber!="undefined")if(trackingJson.confirmationNumber!=null&&trackingJson.confirmationNumber!="null")imageParameters+=trackingJson.confirmationNumber;imageParameters+="\x26ftXValue\x3d";if(typeof trackingJson.roomRevenueUSD!="undefined")if(trackingJson.roomRevenueUSD!=
null&&trackingJson.roomRevenueUSD!="null")imageParameters+=trackingJson.roomRevenueUSD;imageParameters+="\x26U1\x3d";if(typeof trackingJson.hotelBrand4Digit!="undefined"&&trackingJson.hotelBrand4Digit!=null&&trackingJson.hotelBrand4Digit!="null")imageParameters+=trackingJson.hotelBrand4Digit;else imageParameters+=getBrandCode();imageParameters+="\x26U2\x3d";if(typeof trackingJson.propertyCode!="undefined")if(trackingJson.propertyCode!=null&&trackingJson.propertyCode!="null")imageParameters+=trackingJson.propertyCode;
imageParameters+="\x26U3\x3d";if(typeof trackingJson.checkInDate!="undefined")imageParameters+=trackingJson.checkInDate;imageParameters+="\x26U4\x3d";if(typeof trackingJson.roomNights!="undefined")imageParameters+=trackingJson.roomNights;imageParameters+="\x26U5\x3d";if(typeof trackingJson.hotelCityStateCountryCode!="undefined")imageParameters+=trackingJson.hotelCityStateCountryCode}if(trackingJson.type==="hotelsearch"){Bootstrapper.imageRequest("http://servedby.flashtalking.com/spot/1"+imageParameters);
Bootstrapper.imageRequest("http://fdz.flashtalking.com/services/ihg/search/segment.php?"+searchImageParameters)}else if(trackingJson.type==="hotel-information"){Bootstrapper.imageRequest("https://servedby.flashtalking.com/spot/1"+imageParameters);Bootstrapper.imageRequest("https://fdz.flashtalking.com/services/ihg/hotels/segment.php?"+hotelDetailImageParameters)}else Bootstrapper.imageRequest("https://servedby.flashtalking.com/spot/1"+imageParameters)}}catch(e){Bootstrapper.reportException({message:"Tracking: EUR_AdvantagePricePhase2_2016 "+
e});console.log("Tracking: EUR_AdvantagePricePhase2_2016"+e)}})},1543793,[1556456],374138,[241777]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.RoomKeyTag=function($){var ROOMKEY_COOKIE_NAME="roomKeyCookie";var HOTELICOPTER_REQUEST_SWITCH_PARAM="showPopunder";var COOKIES_TTL="14";var PAL_BRAND_CODE="ma";var FULL_TRAFFIC=100;var TRUE="true";var BRAND_SUFIX="_new";var PLATINUM_MEMBERSHIP="PLATINUM";var SPIRE_MEMBERSHIP="SPIRE";var ROOMKEY_CONNECTOR_JS="//www.roomkey.com/js/connector/connector.js";var _apiKey=
"";var _roomKeyConfig={state:{eligibleForRoomkey:false,inSplitTraffic:false,overridePopunder:false},checkInDate:"",checkOutDate:"",location:"",latitude:0,longitude:0,rooms:"",guests:"",brand:"",locale:"",language:"",pageSrc:"",propertyCode:""};var _setUpRoomKey=function(roomKeyConfig,trackingJson){if(roomKeyConfig&&trackingJson)if(roomKeyConfig.enabled===true){_initState(roomKeyConfig);if(_roomKeyConfig.state.eligibleForRoomkey)_isRequestEligibleForRoomKeyLayer(roomKeyConfig,trackingJson);if(_isNotBlankString(trackingJson.envName))_apiKey=
roomKeyConfig.envKeys[trackingJson.envName]}};var _initState=function(roomKeyConfig){if(_isBrowserCompatible()&&_isDeviceCompatible()){_roomKeyConfig.state.eligibleForRoomkey=true;if(_showPopunder(roomKeyConfig.trafficPercentage))_roomKeyConfig.state.inSplitTraffic=true;if(_overridePopunder())_roomKeyConfig.state.overridePopunder=true}};var _isBrowserCompatible=function(){var browserCompatible=true;var isOpera=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1;if(isOpera)browserCompatible=
false;return browserCompatible};var _isDeviceCompatible=function(){var mobile=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Android/i);return!mobile};var _showPopunder=function(trafficPercentage){var trafficPct=parseInt(trafficPercentage)||0;if(trafficPct<0||trafficPct>FULL_TRAFFIC)trafficPct=0;return trafficPct/FULL_TRAFFIC>=Math.random()};var _overridePopunder=function(){var paramValue=_urlParam(HOTELICOPTER_REQUEST_SWITCH_PARAM);return paramValue===
TRUE};var _isRequestEligibleForRoomKeyLayer=function(roomKeyConfig,trackingJson){var armyHotelsBrand=trackingJson.brand.startsWith(PAL_BRAND_CODE);var otherTrackinJson=trackingJson;if(trackingJson.reservation)otherTrackinJson=trackingJson.reservation;if(_isRestrictedCountry(trackingJson.akamaiCountryCode,roomKeyConfig.restrictedAkamaiCountryCodes)||!_isSupportedLocale(otherTrackinJson.siteLocale,roomKeyConfig.supportedLocales)||_isRoomKeyRestrictedForGuest(trackingJson.corporateId,trackingJson.groupCode)||
_isRoomKeyRestrictedForMembership(trackingJson.membershipStatus,otherTrackinJson.ambassadorMember,otherTrackinJson.concurProfile,roomKeyConfig.disabledForRCMembers)||_isRoomKeyRestrictedForIATA(trackingJson.iata,roomKeyConfig.restrictedPMIDList)||_isRoomKeyRestrictedForRatePreference(trackingJson.rateCodes,roomKeyConfig.restrictedRates)||armyHotelsBrand)_roomKeyConfig.state.eligibleForRoomkey=false};var _isRestrictedCountry=function(akamaiCountryCode,restrictedCountries){var restrictedCountry=false;
if(Array.isArray(restrictedCountries)){RoomKeyTag.TRACE("AkamaiCountryCode: "+akamaiCountryCode);restrictedCountry=_isNotBlankString(akamaiCountryCode)&&restrictedCountries.indexOf(akamaiCountryCode.toUpperCase())!=-1}return restrictedCountry};var _isSupportedLocale=function(siteLocale,supportedLocales){var supportedLocale=true;if(Array.isArray(supportedLocales)){RoomKeyTag.TRACE("Locale: "+siteLocale);supportedLocale=_isNotBlankString(siteLocale)&&supportedLocales.indexOf(siteLocale)!=-1}return supportedLocale};
var _isRoomKeyRestrictedForGuest=function(corporateId,groupCode){RoomKeyTag.TRACE("CorporateId: "+corporateId+", Group Code: "+groupCode);var restrictedForGuest=_isNotBlankString(corporateId)||_isNotBlankString(groupCode);return restrictedForGuest};var _isRoomKeyRestrictedForMembership=function(membershipStatus,ambassadorMember,concurProfile,disabledForRCMembers){RoomKeyTag.TRACE("MembershipStatus: "+membershipStatus+", AmbassadorMember: "+ambassadorMember+", ConcurProfile: "+concurProfile+", DisabledForRCMembers: "+
disabledForRCMembers);var membershipLevel=membershipStatus||"";var disabledForRewardsClubMember=membershipLevel.toUpperCase()===PLATINUM_MEMBERSHIP||membershipLevel.toUpperCase()===SPIRE_MEMBERSHIP||_isNotBlankString(membershipStatus)&&disabledForRCMembers;return disabledForRewardsClubMember||ambassadorMember===TRUE||concurProfile===TRUE};var _isRoomKeyRestrictedForIATA=function(iataNumber,restrictedPMIDList){RoomKeyTag.TRACE("IATA Number: "+iataNumber);var restrictedIATA=false;if(Array.isArray(restrictedPMIDList))restrictedIATA=
_isNotBlankString(iataNumber)&&restrictedPMIDList.indexOf(iataNumber)!=-1;return restrictedIATA};var _isRoomKeyRestrictedForRatePreference=function(rateCodes,restrictedRates){RoomKeyTag.TRACE("Rate Codes: "+rateCodes);for(var index in restrictedRates)if(_isNotBlankString(rateCodes)&&rateCodes.indexOf(restrictedRates[index])!=-1)return true;return false};var _setUpCopterParams=function(roomKeyConfig,trackingJson){var otherTrackinJson=trackingJson;if(trackingJson.reservation)otherTrackinJson=trackingJson.reservation;
_roomKeyConfig.locale=otherTrackinJson.siteLocale||"en_US";_roomKeyConfig.language=(trackingJson.language||"en").toUpperCase();_roomKeyConfig.pageSrc=trackingJson.type||"home";_roomKeyConfig.propertyCode=trackingJson.propertyCode||"";var indexBrandSufix=(trackingJson.brand||"6c").indexOf(BRAND_SUFIX);if(indexBrandSufix!=-1)_roomKeyConfig.brand=trackingJson.brand.substring(0,indexBrandSufix).toLowerCase();else _roomKeyConfig.brand=trackingJson.brand.toLowerCase();if(trackingJson.reservation)_setUpSearchParams(trackingJson.reservation);
else _setUpSearchParams(trackingJson)};var _setUpSearchParams=function(json){_roomKeyConfig.location=json.destination||"";_roomKeyConfig.rooms=json.roomCount||"1";_roomKeyConfig.guests=(parseInt(json.adultCount||1)+parseInt(json.childCount||0)).toString();_roomKeyConfig.latitude=json.propertyLat;_roomKeyConfig.longitude=json.propertyLong;if(!_roomKeyConfig.latitude||!_roomKeyConfig.longitude){_roomKeyConfig.latitude=json.destLatitude||"0";_roomKeyConfig.longitude=json.destLongitude||"0"}var checkInDate;
var checkOutDate;if(json.checkInDate&&json.checkOutDate){checkInDate=json.checkInDate;checkOutDate=json.checkOutDate}if(json.arrivalDate&&json.departureDate){checkInDate=trackingJson.arrivalDate;checkOutDate=trackingJson.departureDate}if(checkInDate&&checkOutDate)_setReservationDates(new Date(checkInDate),new Date(checkOutDate))};var _setUpSearchParamsFromFields=function(_roomKeyConfig){if(_roomKeyConfig.searchSelectors){_roomKeyConfig.location=$(_roomKeyConfig.searchSelectors.destination).val()||
"";_roomKeyConfig.rooms=$(_roomKeyConfig.searchSelectors.rooms).val()||"";_roomKeyConfig.guests=(parseInt($(_roomKeyConfig.searchSelectors.adults).val()||1)+parseInt($(_roomKeyConfig.searchSelectors.children).val()||0)).toString();var checkInDate=$(_roomKeyConfig.searchSelectors.checkin).val();var checkOutDate=$(_roomKeyConfig.searchSelectors.checkout).val();if(checkInDate&&checkOutDate){checkInDate=checkInDate.replace(/-/g," ");checkOutDate=checkOutDate.replace(/-/g," ");_setReservationDates(new Date(checkInDate),
new Date(checkOutDate))}}};var _setReservationDates=function(checkInDate,checkOutDate){_roomKeyConfig.checkInDate=checkInDate.getFullYear()+"-"+_formatTwoChars(checkInDate.getMonth()+1)+"-"+_formatTwoChars(checkInDate.getDate());_roomKeyConfig.checkOutDate=checkOutDate.getFullYear()+"-"+_formatTwoChars(checkOutDate.getMonth()+1)+"-"+_formatTwoChars(checkOutDate.getDate())};var _public={config:_roomKeyConfig,debug:false,TRACE:this.debug&&window.console&&window.console.log&&window.console.log.bind?
window.console.log.bind(window.console):function(){}};_public.init=function(roomKeyConfig,trackingJson){_setUpRoomKey(roomKeyConfig,trackingJson);RoomKeyTag.TRACE("Is RoomKey elegible? "+_roomKeyConfig.state.eligibleForRoomkey);if(_roomKeyConfig.state.eligibleForRoomkey){_addRoomKeyConnectorJS();_setUpCopterParams(roomKeyConfig,trackingJson);if(roomKeyConfig.pageAction[_roomKeyConfig.pageSrc])_roomKeyConfig.searchSelectors=roomKeyConfig.pageAction[_roomKeyConfig.pageSrc].searchSelectors}return this};
_public.loadPopunder=function(forcePopunder){if(!forcePopunder)forcePopunder=false;if(forcePopunder===true||forcePopunder===TRUE)forcePopunder=true;var stateRoomKey=_roomKeyConfig.state;var isEligibleForRoomkey=stateRoomKey.eligibleForRoomkey;if(_readCookie(ROOMKEY_COOKIE_NAME)!=null)isEligibleForRoomkey=false;if(isEligibleForRoomkey&&(stateRoomKey.overridePopunder||stateRoomKey.inSplitTraffic||forcePopunder)){if(!_roomKeyConfig.location)_setUpSearchParamsFromFields(_roomKeyConfig);if(_roomKeyConfig.location||
_roomKeyConfig.propertyCode)try{CopterConnect.load(_apiKey,{location:_roomKeyConfig.location,state:"",country:"",lat:_roomKeyConfig.latitude,lng:_roomKeyConfig.longitude,property_id:_roomKeyConfig.propertyCode,check_in:_roomKeyConfig.checkInDate,check_out:_roomKeyConfig.checkOutDate,rooms:_roomKeyConfig.rooms,guests:_roomKeyConfig.guests,price_from:0,price_to:0,star_from:1,star_to:5,brand:_roomKeyConfig.brand,amenities:"",currency:"",language:_roomKeyConfig.language,source_page:_roomKeyConfig.pageSrc,
visitor_type:"",custom_data:"",window_name:"IHG_Roomkey_pop",locale:_roomKeyConfig.locale,allow_tab_under:TRUE,window_url:"/redirect/rkRedirect"});s.tl(this,"o","room key pop under called");var creationDate=new Date;_writeCookie(ROOMKEY_COOKIE_NAME,creationDate.getTime())}catch(err){RoomKeyTag.TRACE("RoomKey Failed: "+err.message)}}else RoomKeyTag.TRACE("RoomKey Popunder not being called. Either the cookie / request param are empty, or the switch for hotelicopter is turned off or the current browser is FF 4 or above")};
var _writeCookie=function(name,value){var expDate=new Date;expDate.setTime(expDate.getTime()+COOKIES_TTL*24*60*60*1E3);var urlPath=window.location.href;var domain=urlPath.substring(0,urlPath.indexOf(".com/"));domain=domain.substring(domain.lastIndexOf(".")+1)+".com";document.cookie=name+"\x3d"+value+"; expires\x3d"+expDate.toGMTString()+"; domain\x3d"+domain+"; path\x3d/"};var _readCookie=function(name){var nameEQ=name+"\x3d";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=$.trim(ca[i]);
if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null};var _urlParam=function(name){var results=(new RegExp("[?\x26]"+name+"\x3d([^\x26#]*)")).exec(window.location.href);if(results==null)return null;else return results[1]||null};var _isNotBlankString=function(str){return!!str&&!/^\s*$/.test(str)};var _formatTwoChars=function(monthDay){return("0"+monthDay).slice(-2)};var _addRoomKeyConnectorJS=function(){if($('head script[src\x3d"'+ROOMKEY_CONNECTOR_JS+'"]').length>0)return;
var rkJS=document.createElement("script");rkJS.setAttribute("type","text/javascript");rkJS.setAttribute("src",ROOMKEY_CONNECTOR_JS);$("head").append(rkJS)};return _public}(window.jQuery)},1765245,423129);